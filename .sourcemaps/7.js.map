{"version":3,"sources":["../../src/pages/CurrentTab/current.module.ts","../../src/pages/CurrentTab/current.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CurrentTab } from './current';\n\n@NgModule({\n  declarations: [\n    CurrentTab,\n  ],\n  imports: [\n    IonicPageModule.forChild(CurrentTab),\n  ],\n  exports: [\n    CurrentTab\n  ]\n})\nexport class CurrentPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/CurrentTab/current.module.ts","/**\n * Generated class for the CurrentPage page.\n *\n */\n\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\n\n// import the model\nimport { Stack } from '../../model/stack';\nimport { StackItem, TrackerItem } from '../../model/stackItem';\n\n//Services\nimport { StackService } from '../../providers/stack-service/stack-service';\n\nimport { BLE } from '@ionic-native/ble';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-current',\n  templateUrl: 'current.html',\n})\nexport class CurrentTab {\n\n\tprivate devices: any;\n\tprivate scanning: boolean = false;\n\n\tconstructor(private navCtrl: NavController, private navParams: NavParams, private stackService: StackService, \n\t\tprivate ble: BLE, private loadingCtrl: LoadingController, private statusbar: StatusBar) {\n  \t}\t\n\n  \tionViewDidLoad() {\n\t\tconsole.log('ionViewDidLoad CurrentPage');\n\t\tthis.statusbar.styleLightContent();\n\t}\n\t\n\tionViewWillLeave() {\n\t\tconsole.log(\"In will leave\");\n\t\t/*for(let item of this.stackService.currentStack.items){\n\t\t\titem.nearby = null;\n\t\t}*/\n\t\tthis.scanning = false;\n\t}\n\n\tionViewWillUnload() {\n\t\tthis.scanning = false;\n\t\t\n\t}\n\n\tprivate isTracker(item){\n\t\tconsole.log(item.constructor);\n\t\tconsole.log('isTracker: ', item.constructor.name);\n\t\tif(item.constructor.name === 'TrackerItem'){\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tprivate scan() {\n\t\tthis.scanning = true;\n\t\tconsole.log(this.stackService.currentStack.items[0]);\n\t\tthis.stackService.currentStack.items[0].nearby = true;\n\t\tconsole.log(\"Enabling Bluetooth\");\n\t\tthis.ble.isEnabled().then(result => {\n\t\t\tconsole.log(\"isEnabled \" + result);\n\t\t\tthis.scanning = true;\n\t\t\tlet loading = this.loadingCtrl.create({\n\t\t\t\tcontent: 'Scanning...'\n\t\t\t}); // Show the user a loading spinner so they know they are being logged in\n    \t\tloading.present();\n\t\t\tthis.ble.scan([], 5).subscribe(devices => {\n\t\t\t\tconsole.log(\"BLE devices \" + JSON.stringify(devices));\n\t\t\t\tfor(let device of devices) {\n\t\t\t\t\tfor(let item of this.stackService.currentStack.items){\n\t\t\t\t\t\t// If the item is a tracker then cast it so we can check the id\n\t\t\t\t\t\tif(item.constructor.name === \"TrackerItem\"){\n\t\t\t\t\t\t\tvar trackerItem = <TrackerItem>item; \n\t\t\t\t\t\t\tif(device.id === trackerItem.id){\n\t\t\t\t\t\t\t\titem.nearby = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tloading.dismiss();\n\t\t\t});\n\t\t}).catch(err => {\n\t\t\tconsole.log(\"Error: \" + err);\n\t\t});\t\t\n\t}\n\n\tpublic foundItem(item): boolean {\n\t\tif(this.scanning){\n\t\t\tif(item.nearby){\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic foundNoItem(item): boolean {\n\t\tif(this.scanning){\n\t\t\tif(!item.nearby){\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic isNearby(item): string{\n\t\tif(this.scanning){\n\t\t\tif(item.nearby) {\n\t\t\t\treturn '#00c6a7';\n\t\t\t} else {\n\t\t\t\treturn '#cf502a';\n\t\t\t}\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/CurrentTab/current.ts"],"sourceRoot":""}